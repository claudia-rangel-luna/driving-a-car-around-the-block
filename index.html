<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Driving Car</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
</head>

<body>
    <button type="button" value="start" onclick="startCars()">Start</button>
    <button type="button" value="stop" onclick="stopCars()">Stop</button>
    <button type="button" value="reset" onclick="resetCars()">Reset</button>
    <div class="car1"><img class="car1" src="images/orangeCar.png" style="transform: rotate(0deg);"></div>
    <!-- <div class="car2"><img class="car2" src="images/redCar.png"></div> -->
	<!-- <div class="car3"><img class="car3" src="images/pinkCar.png"></div> -->
    <div class="intersection1"></div>
    <div class="intersection2"></div>
    <div class="intersection3"></div>
    <div class="intersection4"></div>
    <div class="blackRoad"></div>

    <script type="text/javascript">
    var car1 = document.querySelector('.car1');
    // var car2 = document.querySelector('.car2');
    var intersectionWait = 500;
    var roadSpeed = 10;
    var intersectionSpeed = 100;

    var IntervalId;

    function resetCars() {
        car1.style.top = "80px";
        car1.style.left = "180px";
        // car2.style.top = "235px";
        // car2.style.left = "30px";
        // car2.style.transform = 'rotate(90deg)';
        // car3.style.top = "160px";
        // car3.style.left = "140px";
        // car1.style.transform = 'rotate(360deg)';

    }

    resetCars();

    //Move car East
    
    function moveCarsEast() {
        var car1Left = getComputedStyle(car1).left.replace('px', '');
        var car1Top = getComputedStyle(car1).top.replace('px', '');

        // var car2Left = getComputedStyle(car2).left.replace('px', '');
        // var car2Top = getComputedStyle(car2).top.replace('px', '');

        if (car1Left >= 670) {
            stopCars();
            setTimeout(startCarsIntersectionEast, intersectionWait);
            
        }
        console.log(car1.style.left + ' = left');
        console.log(car1Left + ' = left');
        console.log(car1Top + ' = top');

        car1.style.left = `${parseInt(car1.style.left.replace("px", "")) + 10}px`;

        // car2.style.left = `${parseInt(car2.style.left.replace("px", "")) + 0}px`;
    }

    //Move car East through intersection

    function carsMoveIntersectionEast() {
        var car1Left = getComputedStyle(car1).left.replace('px', '');
        var car1Top = getComputedStyle(car1).top.replace('px', '');
        car1.style.left = `${parseInt(car1.style.left.replace("px", "")) + 10}px`;
       
        // var car2Left = getComputedStyle(car2).left.replace('px', '');
        // var car2Top = getComputedStyle(car2).top.replace('px', '');
        // car2.style.left = `${parseInt(car2.style.left.replace("px", "")) + 10}px`;
 		
        if (car1Left >= 815) {
            startCarsSouth();
        }
       // car2.style.transform = 'rotate(360deg)';
		        
    }


    function startCarsSouth() {
        stopCars();
        // rotateCar()
        intervalId = setInterval(moveCarsSouth, roadSpeed);
    }
    //Move car South

    function moveCarsSouth() {
        var car1Left = getComputedStyle(car1).left.replace('px', '');
        var car1Top = getComputedStyle(car1).top.replace('px', '');

        // var car2Left = getComputedStyle(car2).left.replace('px', '');
        // var car2Top = getComputedStyle(car2).top.replace('px', '');

        if (car1Top >= 800) {
            stopCars();
            setTimeout(startCarsIntersectionSouth, intersectionWait);
        }

        // if (car2Top >= 100) {
        //     stopCars();
        //     setTimeout(startCarsIntersectionSouth, intersectionWait);
        // }
        console.log(car1.style.left + ' = left');
        console.log(car1Left + ' = left');
        console.log(car1Top + ' = top');

        // console.log(car2.style.left + ' = left');
        // console.log(car2Left + ' = left');
        // console.log(car2Top + ' = top');

        car1.style.top = `${parseInt(car1.style.top.replace("px", "")) + 10}px`;
         car1.style.transform = 'rotate(90deg)';

         // car2.style.top = `${parseInt(car1.style.top.replace("px", "")) + 10}px`;
         // car2.style.transform = 'rotate(90deg)';
    }

    //Move car south through intersection

    function carsMoveIntersectionSouth() {
        var car1Left = getComputedStyle(car1).left.replace('px', '');
        var car1Top = getComputedStyle(car1).top.replace('px', '');
        car1.style.top = `${parseInt(car1.style.top.replace("px", "")) + 10}px`;
        
        // var car2Left = getComputedStyle(car2).left.replace('px', '');
        // var car2Top = getComputedStyle(car2).top.replace('px', '');
        // car2.style.top = `${parseInt(car2.style.top.replace("px", "")) + 10}px`;

        if (car1Top >= 950) {
            startCarsWest();
        }
        // if (car2Top >= 950) {
        //     startCarsEast();
        // }
    }

    function startCarsWest() {
        stopCars();
        intervalId = setInterval(moveCarsWest, roadSpeed);
    }

    //Move car west

    function moveCarsWest() {
        var car1Left = getComputedStyle(car1).left.replace('px', '');
        var car1Top = getComputedStyle(car1).top.replace('px', '');
        
        // var car2Left = getComputedStyle(car2).left.replace('px', '');
        // var car2Top = getComputedStyle(car2).top.replace('px', '');
        
        if (car1Left <= 190) {
            stopCars();
            setTimeout(startCarsIntersectionWest, intersectionWait);
        }

        // if (car2Left <= 190) {
        //     stopCars();
        //     setTimeout(startCarsIntersectionWest, intersectionWait);
        // }
        console.log(car1.style.left + ' = left');
        console.log(car1Left + ' = left');
        console.log(car1Top + ' = top');

        car1.style.left = `${parseInt(car1.style.left.replace("px", "")) - 10}px`;
         car1.style.transform = 'rotate(180deg)';

         // car2.style.left = `${parseInt(car1.style.left.replace("px", "")) - 10}px`;
         // car2.style.transform = 'rotate(180deg)';
    }

    //Move car west through intersection

    function carsMoveIntersectionWest() {
        var car1Left = getComputedStyle(car1).left.replace('px', '');
        var car1Top = getComputedStyle(car1).top.replace('px', '');
        car1.style.left = `${parseInt(car1.style.left.replace("px", "")) - 10}px`;
       
       // var car2Left = getComputedStyle(car2).left.replace('px', '');
       //  var car2Top = getComputedStyle(car2).top.replace('px', '');
       //  car2.style.left = `${parseInt(car2.style.left.replace("px", "")) - 10}px`;

        if (car1Left <= 70) {
            stopCars();
            startCarsNorth();
        }
        // if (car2Left <= 70) {
        //     stopCars();
        //     startCarsNorth();
        // }
    }

    function startCarsWest() {
        stopCars();
        intervalId = setInterval(moveCarsWest, roadSpeed);
    }
    //Move car north

    function moveCarsNorth() {
        var car1Left = getComputedStyle(car1).left.replace('px', '');
        var car1Top = getComputedStyle(car1).top.replace('px', '');
        
        // var car2Left = getComputedStyle(car2).left.replace('px', '');
        // var car2Top = getComputedStyle(car2).top.replace('px', '');

        if (car1Top <= 210) {
            stopCars();
                  
            setTimeout(startCarsIntersectionNorth, intersectionWait);
        }


        console.log(car1.style.left + ' = left');
        console.log(car1Left + ' = left');
        console.log(car1Top + ' = top');

        car1.style.top = `${parseInt(car1.style.top.replace("px", "")) - 10}px`;
         car1.style.transform = 'rotate(270deg)';

         // car2.style.top = `${parseInt(car1.style.top.replace("px", "")) - 10}px`;
         // car2.style.transform = 'rotate(270deg)';
    }

    //Move car north through intersection

    function carsMoveIntersectionNorth() {
        var car1Left = getComputedStyle(car1).left.replace('px', '');
        var car1Top = getComputedStyle(car1).top.replace('px', '');
        car1.style.top = `${parseInt(car1.style.top.replace("px", "")) - 10}px`;

        // var car2Left = getComputedStyle(car2).left.replace('px', '');
        // var car2Top = getComputedStyle(car2).top.replace('px', '');
        // car2.style.top = `${parseInt(car2.style.top.replace("px", "")) - 10}px`;
       
        if (car1Top <= 90) {
            stopCars();
            startCar1();
            car1.style.transform = 'rotate(0deg)';
            // car2.style.transform = 'rotate(0deg)';
            // startCars();
        }
    }

    function startCarsNorth() {
        stopCars();
        intervalId = setInterval(moveCarsNorth, roadSpeed);
         
    }

    // Intersection timeouts and calling next move

    function startCarsIntersectionEast() {
        intervalId = setInterval(carsMoveIntersectionEast, intersectionSpeed)
    }

    function startCarsIntersectionSouth() {
        intervalId = setInterval(carsMoveIntersectionSouth, intersectionSpeed)
    }

    function startCarsIntersectionWest() {
        intervalId = setInterval(carsMoveIntersectionWest, intersectionSpeed)
    }

    function startCarsIntersectionNorth() {
        intervalId = setInterval(carsMoveIntersectionNorth, intersectionSpeed)
    }
    //Initial start of car

    function startCar1() {
        intervalId = setInterval(moveCarsEast, roadSpeed);
    }

    function startCars() {
        intervalId = setInterval(moveCarsEast, roadSpeed);
    }
    //Clearing interval of car

    function stopCars() {
        clearInterval(intervalId);

    }
    </script>
</body>

</html>